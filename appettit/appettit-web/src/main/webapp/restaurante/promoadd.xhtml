<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui" lang="sp">


<h:head>
	<meta charset="ISO-8859-1"></meta>
	<title>Appetit-AddMenu</title>

	<ui:include src="/WEB-INF/includes/header_lib.xhtml" />

</h:head>

<h:body>


	<header class="fixed-top header"> <ui:include
		src="/WEB-INF/includes/header_logRestaurant.xhtml" /> <!-- top header -->
	<div class="navigation w-100">
		<div class="container">
			<ui:include src="/WEB-INF/includes/navRestaurante.xhtml" />
		</div>
	</div>
	</header>

	<div class="main-panel">
		<div class="container">
			<div class="content-wrapper">
				<h:form class="addusuario-form" autocomplete="off">
					<div class="row mb-3 pt-3">
						<div class="col-xl-3 col-lg-3 col-md-3 pb-3 pt-3"></div>
						<div class="col-xl-6 col-lg-6 col-md-6 pb-3 pt-3">
							<div class="card">
								<div class="cadr-body">
									<div class="col-12 mb-1 text-center">
										<p:outputPanel id="cropperPanel"
											style="text-align: -webkit-center;">
											<h:panelGrid columns="1"
												rendered="#{not empty beanAddPromocion.imgfile}">

												<h:panelGrid columns="2" cellpadding="7">

													<p:imageCropper value="#{beanAddPromocion.croppedImage}"
														id="imageCropper" cache="false"
														image="#{beanAddPromocion.image}" />
													<p:outputPanel id="cropped">
														<p:graphicImage cache="false"
															rendered="#{not empty beanAddPromocion.croppedImage}"
															value="#{beanAddPromocion.cropped}" />
													</p:outputPanel>

												</h:panelGrid>
											</h:panelGrid>
										</p:outputPanel>
									</div>

									<div class="col-12 mb-3 text-center">
										<p:fileUpload mode="advanced" multiple="false"
											label="Cargar Imagen" sizeLimit="2097152"
											allowTypes="/(\.|\/)(gif|jpe?g)$/"
											invalidSizeMessage="Tama&ntilde;o m&acute;ximo 2MB"
											invalidFileMessage="Formatos soportados: gif | jpg | jpeg"
											update="messages cropperPanel" auto="true"
											listener="#{beanAddPromocion.handleFileUpload}" />
									</div>

									<div class="col-12 d-flex flex-row">
										<div class="col-4  mb-3">
											<p:outputLabel for="addName" value="Nombre" />
										</div>
										<div class="col-8  mb-3 mr-0 pr-0">
											<h:inputText type="text" class="form-control" id="addName"
												required="true" name="addName"
												value="#{beanAddPromocion.nombre}">
											</h:inputText>
										</div>
									</div>


									<div class="col-12 d-flex flex-row">
										<div class="col-4  mb-3">
											<p:outputLabel for="addDescripcion" value="Descripcion" />
										</div>
										<div class="col-8  mb-3 mr-0 pr-0">
											<h:inputTextarea type="text" class="form-control"
												id="addDescripcion" required="true" name="addDescripcion"
												value="#{beanAddPromocion.descripcion}" row="30" col="50" />
										</div>
									</div>

									<div class="col-12 d-flex flex-row">
										<div class="col-4  mb-3">
											<p:outputLabel for="addProducts" value="Men&uacute;s" />
										</div>
										<div class="col-8 mb-3 mr-0 pr-0">
											<p:selectCheckboxMenu id="addProducts"
												value="#{beanAddPromocion.menuSel}" label="Productos"
												style="width: 100%" multiple="true" required="true"
												filter="true" filterMatchMode="startsWith"
												panelStyle="width: 25rem" scrollHeight="300">
												<f:selectItems value="#{beanAddPromocion.menus}" var="menu"
													itemLabel="#{menu.nombre}" itemValue="#{menu}" />
												<p:ajax event="toggleSelect" listener="#{beanAddPromocion.calcularPrecio}"  />	
												<p:ajax event="change" listener="#{beanAddPromocion.calcularPrecio}" update="addSubTotal"/>
												

											</p:selectCheckboxMenu>

										</div>
									</div>
									<div class="col-12 d-flex flex-row">
										<div class="col-4  mb-3">
											<p:outputLabel for="addDescuento" value="Descuento" />
										</div>
										<div class="col-8  mb-3 mr-0 pr-0">
											<p:inputNumber id="addDescuento" required="true"
												name="addDescuento" symbol=" %" symbolPosition="s"
												decimalSeparator="," thousandSeparator="."
												value="#{beanAddPromocion.descuento}">
											</p:inputNumber>
										</div>
									</div>

									<div class="col-12 d-flex flex-row">
										<div class="col-4  mb-3">
											<p:outputLabel for="addSubTotal" value="Subtotal" />
										</div>
										<div class="col-8  mb-3 mr-0 pr-0">
											<p:inputNumber id="addSubTotal" required="true"
												name="addSubTotal" symbol="$U " symbolPosition="p"
												decimalSeparator="," thousandSeparator="."
												value="#{beanAddPromocion.subTotal}"  autoUpdate="true">
											</p:inputNumber>
										</div>
									</div>

									<div class="col-12 d-flex flex-row">
										<div class="col-4  mb-3">
											<p:outputLabel for="addTotalPrice" value="Precio" />
										</div>
										<div class="col-8  mb-3 mr-0 pr-0">
											<p:inputNumber id="addTotalPrice" required="true"
												name="addTotalPrice" symbol="$U " symbolPosition="p"
												decimalSeparator="," thousandSeparator="."
												value="#{beanAddPromocion.precioTotal}">
											</p:inputNumber>
										</div>
									</div>

									<div class="col-12">
										<p:growl id="messages" showDetail="true" />
									</div>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-lg-3 col-md-3 pb-3 pt-3"></div>

						<!-- Boton -->
						<div class="col-xl-3 col-lg-3 col-md-3 pb-3 pt-3"></div>
						<div class="col-xl-6 col-lg-6 col-md-6 pb-3 pt-3">
							<div class="float-right">
								<div class="col-12 d-flex flex-row">
									<p:commandButton value="CREAR"
										action="#{beanAddPromocion.addPromocion}" update="messages"
										styleClass="btn btn-primary" />
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-lg-3 col-md-3 pb-3 pt-3"></div>

					</div>
				</h:form>
			</div>
		</div>
	</div>

	<ui:include src="/WEB-INF/includes/footer_lib.xhtml" />

	<script type="text/javascript">
		var $ds = jQuery.noConflict();
	</script>
</h:body>
</html>