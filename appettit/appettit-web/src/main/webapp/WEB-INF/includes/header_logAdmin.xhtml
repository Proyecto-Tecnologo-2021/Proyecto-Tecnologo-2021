<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" lang="sp">

	<!-- top header -->
	<div class="top-header py-2 bg-white">
		<div class="container">
			<div class="row no-gutters">
				<div class="col-lg-12 text-right text-lg-right">
					<div class="dropdown show">

						<a class="nav-link text-secondary" id="userDropdown" href="#"
							data-toggle="dropdown">
							<div class="navbar-profile">
								<p class="mb-0 d-sm-block navbar-profile-name"
									id="userProfileData">

									<h:outputText value="#{beanHomeAdministrador.administradorDTO.nombre}" id="userProfileName"/>
									<i class="fas fa-user-circle h3"></i>
								</p>
							</div>
						</a>
						<div
							class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list"
							aria-labelledby="profileDropdown">
							<h:form>
								<h:commandButton value="Salir" icon="pi pi-arrow-left" action="#{beanHomeAdministrador.logout()}" styleClass="btn btn-outline-warning btn-lg btn-block"/>
						    </h:form>
							

						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script>
		 function clearLocalStorage(prefix) {function clearLocalStorage(prefix) {
	     	localStorage.clear();
	     	rds();
	     }

	     	localStorage.clear();
	     	rds();
	     }

	</script>
	
	<!-- 
	<script>
			var userTOKEN;
			
			//loadLocalStorage();
			
			function loadinfoFromLocalStorage() {
				storeLocalStorage();
				loadLocalStorage();
			}
			
            function loadLocalStorage() {
                var prefix = 'react.appetitUser';
                console.log(prefix);
                getLocalStorageValue(prefix);
            }

            function storeLocalStorage(){
            	var prefix = 'react.appetitUser';

            	//var contenido = "{\"id\":\"4\", \"correo\":\"mpulidouy@hotmail.com\", \"token\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwicm9sZXMiOlt7ImlkIjoxLCJub21icmUiOiJBZG1pbmlzdHJhZG9yIn1dLCJpYXQiOjE2MjQ1NTQ2MjMsImV4cCI6MTYyNDU1ODIyM30.e5-4eu_JK7s3pN6Pxp2HjJIYsEOgQ2U4OuLYToJ3XGggLTAPlocbo-sYslaSKjiwJtMLVaIfoQ914dFB3E8VXg\",\"nombre\":\"Admin Prueba Cookie \",\"rol\":\"administrador\"}";
            	var contenido = "%7B%22sub%22%3A%2214%22%2C%22iat%22%3A1638469090%2C%22exp%22%3A1638472690%2C%22tipoUsuario%22%3A%22cliente%22%2C%22idUsuario%22%3A14%2C%22userName%22%3A%221212%22%2C%22nombre%22%3A%221212%22%2C%22correo%22%3A%22121%40gmail.com%22%2C%22telefono%22%3A%2212312%22%7D"
            	localStorage.setItem(prefix, contenido);
                
            }

            function clearLocalStorage(prefix) {
            	localStorage.clear();
            	rds();
            }

            function getLocalStorageValue(prefix) {
            	if (localStorage.getItem(prefix)) {
                	console.log(localStorage.getItem(prefix));
                	var prefixValue = JSON.parse(localStorage.getItem(prefix));
                	
                	//prefixValue = JSON.parse(prefixValue);
                	console.log(prefixValue);
                    
                 	userTOKEN =  prefixValue["token"];

                    //var n = document.getElementById("userProfileName"); 
                    //n.val(prefixValue["nombre"]);

                    //var n = document.getElementById("userProfileCorreo");
                    //n.append(prefixValue["correo"]);
					
					rc([{name: 'id', value: prefixValue["id"]}]);                 
                 
					if(prefixValue["rol"] != 'administrador'){
						console.log("ERROR ROL ADMIN");
						localStorage.clear();
						window.location.href = 'http://127.0.0.1:8080/appettit-web/restaurante/addrestaurante.xhtml';
	                }

                    
                    
                }else{
                	console.log("ERROR NO COOKIE");
                	window.location.href = 'http://127.0.0.1:8080/appettit-web/restaurante/addrestaurante.xhtml';
				}
            }

            </script>
 	-->

</ui:composition>
